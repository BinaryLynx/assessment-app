Данный проект предоставляет функционал хранения результатов оценок объекта по ряду направлений и расчета общей оценки на их основе.
Для запуска проекта необходимо выполнить команду docker compose up.
Доступные маршруты можно протестировать на странице /swagger

Описание покрываемого программой бизнес-процесса.
В результате проведенной проверки оцениваемого объекта, в систему заносятся результаты по ряду доступных для него направлений или поднаправлений.
На основе этих результатов с помощью заранее определенных алгоритмов расчитывается общая оценка.
На данный момент по умолчанию выбран алгоритм критериев (см. описание ниже).

Основной маршрут - post /inspections/
Функция: расчет оценки для объекта по одному из трех алгоритмов (на данный момент - всегда критериев)
На данный момент нет интерфейса, который бы позволял более удобно отправлять корректные запросы.
Чтобы проверить данный маршрут не вдаваясь в устройство таблиц - можно отпавить json из файла test_json.

Помимо функционала расчета оценок в данном проекте присутствует ограничение доступа к данным в системе на уровне базы данных посредством использования cls и rls привязанных к ролям пользователей и их принадлежности к субъектам проверки.
Всего в системе три роли:
оператор: доступ crud к результатам инспекций, которые были проведены его проверяющим субъектом.
супер-оператор: доступ crud к результатам инспекций, которые были проведены его проверяющим субъектом и просмотр результатов инспекций проведенных нижестоящими по иерархии субъектами.
инспектор: доступ на просмотр результатов инспекций которые были проведены его проверяющим субъектом.

На данный момент протестировать варьируемый доступ к данным можно двумя способами:
1) напрямую в pg_admin: set role antonovaa и выполненив команды на select.
2) поменяв в .env DB_USER = antonovaa и вызвав get.
(изначально данная система расчитывалась на SSO аутентификацию, поэтому нет аутентификации)

Todo:
0) проверить, починить остальные посредственные запросы.
1) Более гибкая возможность выбирать стратегии проверки. (передавать в запросе стратегию. При записи в результаты записывать использованную стратегию, шкалу)
2) Автотесты
3) Проверить входящие и исходящие схемы
4) Вероятно добавить логику логина


Справка:
Термины:
субъект проверки - проверяющий орган
объект проверки - проверяемый объект
направление проверки - применимая к какому-либо объекту характеристика, по которому можно провести оценку. Может включать в собя ряд поднаправлений проверки.

Стратегии:
1) Среднее арифметическое - оценка обособляющей сущности (направления по результатам поднаправлений/общей оценки по результатам направлений) равна среднему арифметическому оценок составных сущностей.
2) Весы - у каждого направления или поднаправления указана значимость. Общая оценка обособляющей сущности определяется суммой произведений составных оценок на их веса.
3) Критерии - Применимо только для общей оценки. Общая оценка вычисляется на основе таблиц критериев, в которых все возможные комбинации оценок направлений и поднаправлений соотносятся с определенной общей оценкой.